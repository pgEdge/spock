CREATE EXTENSION spock;
SELECT spock.spock_max_proto_version();
 spock_max_proto_version 
-------------------------
                       5
(1 row)

SELECT spock.spock_min_proto_version();
 spock_min_proto_version 
-------------------------
                       4
(1 row)

-- test extension version
SELECT spock.spock_version() = extversion
FROM pg_extension
WHERE extname = 'spock';
 ?column? 
----------
 t
(1 row)

-- Check that security label is cleaned up on the extension drop
CREATE TABLE slabel (x money, y text PRIMARY KEY);
SELECT spock.delta_apply('slabel', 'x', false);
 delta_apply 
-------------
 t
(1 row)

SELECT objname, label FROM pg_seclabels;
 objname  |       label       
----------+-------------------
 slabel.x | spock.delta_apply
(1 row)

DROP EXTENSION spock;
SELECT objname, label FROM pg_seclabels;
 objname | label 
---------+-------
(0 rows)

DROP TABLE slabel;
